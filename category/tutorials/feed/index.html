<?xml version="1.0" encoding="UTF-8"?><rss version="2.0"
	xmlns:content="http://purl.org/rss/1.0/modules/content/"
	xmlns:wfw="http://wellformedweb.org/CommentAPI/"
	xmlns:dc="http://purl.org/dc/elements/1.1/"
	xmlns:atom="http://www.w3.org/2005/Atom"
	xmlns:sy="http://purl.org/rss/1.0/modules/syndication/"
	xmlns:slash="http://purl.org/rss/1.0/modules/slash/"
	xmlns:georss="http://www.georss.org/georss" xmlns:geo="http://www.w3.org/2003/01/geo/wgs84_pos#" xmlns:media="http://search.yahoo.com/mrss/"
	>

<channel>
	<title>Tutorials &#8211; Civic Innovations</title>
	<atom:link href="https://civic.io/category/tutorials/feed/" rel="self" type="application/rss+xml" />
	<link>https://civic.io</link>
	<description>The Future is Open</description>
	<lastBuildDate>Mon, 10 Jun 2019 12:43:58 +0000</lastBuildDate>
	<language>en</language>
	<sy:updatePeriod>
	hourly	</sy:updatePeriod>
	<sy:updateFrequency>
	1	</sy:updateFrequency>
	<generator>http://wordpress.com/</generator>
<cloud domain='civic.io' port='80' path='/?rsscloud=notify' registerProcedure='' protocol='http-post' />
<image>
		<url>https://s0.wp.com/i/buttonw-com.png</url>
		<title>Tutorials &#8211; Civic Innovations</title>
		<link>https://civic.io</link>
	</image>
	<atom:link rel="search" type="application/opensearchdescription+xml" href="https://civic.io/osd.xml" title="Civic Innovations" />
	<atom:link rel='hub' href='https://civic.io/?pushpress=hub'/>
	<item>
		<title>5 Minute REST API</title>
		<link>https://civic.io/2014/02/09/5-minute-rest-api/</link>
					<comments>https://civic.io/2014/02/09/5-minute-rest-api/#respond</comments>
		
		<dc:creator><![CDATA[mheadd]]></dc:creator>
		<pubDate>Sun, 09 Feb 2014 14:33:26 +0000</pubDate>
				<category><![CDATA[civic hacking]]></category>
		<category><![CDATA[CouchDB]]></category>
		<category><![CDATA[Open Data]]></category>
		<category><![CDATA[Tutorials]]></category>
		<guid isPermaLink="false">http://civic.io/?p=3213</guid>

					<description><![CDATA[Inspired by one of Waldo Jaquith&#8217;s recent projects to create an easy solution for converting data into a REST API, I wanted to try doing the same thing with a bit of a different approach. Below is a quick screencast demonstrating how to take a... <div class="excerpt-more"><a class="read-more" href="https://civic.io/2014/02/09/5-minute-rest-api/">Read More <i class="fa fa-caret-right"></i></a></div>]]></description>
										<content:encoded><![CDATA[<p>Inspired by one of <a href="https://twitter.com/waldojaquith">Waldo Jaquith&#8217;s</a> recent projects to create an <a href="https://github.com/waldoj/instant-api">easy solution</a> for converting data into a REST API, I wanted to try doing the same thing with a bit of a different approach.</p>
<p>Below is a quick screencast demonstrating how to take a CSV file and convert it into a powerful, flexible <a href="http://en.wikipedia.org/wiki/Representational_state_transfer">REST API</a>. </p>
<div class="jetpack-video-wrapper"><iframe class="youtube-player" width="560" height="315" src="https://www.youtube.com/embed/2sE7bY76kag?version=3&#038;rel=1&#038;showsearch=0&#038;showinfo=1&#038;iv_load_policy=1&#038;fs=1&#038;hl=en&#038;autohide=2&#038;wmode=transparent" allowfullscreen="true" style="border:0;" sandbox="allow-scripts allow-same-origin allow-popups allow-presentation"></iframe></div>
<p>I use the following tools in this demo, some of which I have <a href="https://civic.io/2014/01/15/5-essential-open-data-tools/">mentioned before</a>:</p>
<ul>
<li style="margin-bottom:8px;"><a href="http://couchdb.apache.org/">CouchDB</a></li>
<li style="margin-bottom:8px;"><a href="http://csvkit.readthedocs.org/en/latest/">csvkit</a></li>
<li style="margin-bottom:8px;"><a href="http://stedolan.github.io/jq/">jq</a></li>
<li style="margin-bottom:8px;"><a href="http://www.thegeekstuff.com/2010/02/unix-less-command-10-tips-for-effective-navigation/"><code>less</code></a> command</li>
<li style="margin-bottom:8px;"><a href="http://www.thegeekstuff.com/2012/04/curl-examples/"><code>curl</code></a> command</li>
</ul>
<p>I haven&#8217;t used CouchDB for a project in a while, but I still wonder at its power and utility &#8211; for my money, there is no easier way to create a REST API than with CouchDB.</p>
<p>What I think this example demonstrates is that there are an abundance of tools that can be used to create powerful APIs, making it easier and more practical to build solutions with open data.</p>
<p>Find a tool or approach that best fits your technical skills and get hacking!</p>
]]></content:encoded>
					
					<wfw:commentRss>https://civic.io/2014/02/09/5-minute-rest-api/feed/</wfw:commentRss>
			<slash:comments>0</slash:comments>
		
		
		
		<media:content url="https://1.gravatar.com/avatar/19b2495d5cf389639a704807f4e62fcf?s=96&#38;d=identicon&#38;r=G" medium="image">
			<media:title type="html">mheadd</media:title>
		</media:content>
	</item>
		<item>
		<title>Don&#8217;t Hang Any Pictures</title>
		<link>https://civic.io/2014/02/05/dont-hang-any-pictures/</link>
					<comments>https://civic.io/2014/02/05/dont-hang-any-pictures/#respond</comments>
		
		<dc:creator><![CDATA[mheadd]]></dc:creator>
		<pubDate>Wed, 05 Feb 2014 02:46:18 +0000</pubDate>
				<category><![CDATA[Open Data]]></category>
		<category><![CDATA[Open Government]]></category>
		<category><![CDATA[Tutorials]]></category>
		<guid isPermaLink="false">http://civic.io/?p=3174</guid>

					<description><![CDATA[A few lessons learned and insights gained serving as a municipal Chief Data Officer &#8211; I hope this will be of value to anyone interested in starting an open data program. Helping to create an open data culture in government is a process, not an... <div class="excerpt-more"><a class="read-more" href="https://civic.io/2014/02/05/dont-hang-any-pictures/">Read More <i class="fa fa-caret-right"></i></a></div>]]></description>
										<content:encoded><![CDATA[<p>A few lessons learned and insights gained serving as a municipal Chief Data Officer &#8211; I hope this will be of value to anyone interested in starting an open data program.</p>
<p><img style="float:right;padding:2px;margin-left:13px;" src="https://civicio.files.wordpress.com/2014/02/hang-picture.jpg?w=273&#038;h=300" alt="hang-picture" width="273" height="300" /></p>
<p>Helping to create an open data culture in government is a process, not an outcome. It takes time. Though it may sometimes seem easier to shame people into releasing data, or to find ways around seemingly unreasonable objections, getting public officials to &#8220;own&#8221; the process of opening up their data is a key part of building this culture. But&#8230;</p>
<p><strong>Don&#8217;t</strong> listen to people that tell you to &#8220;take pride in how far you&#8217;ve come in such a short time.&#8221; This kind of attitude assumes that your job is almost done and you can be satisfied in what you&#8217;ve accomplished. You should focus not on how much you have already done, but on how much you have left to do. You have lots and lots more work left. Trust me.</p>
<hr />
<p>When appointed or elected officials release open data, or adopt innovative change, it&#8217;s critical to do what you can to make sure they get recognized for it &#8211; do this regardless of their party or political affiliation. Transparency is more important than politics. But&#8230;</p>
<p><strong>Don&#8217;t</strong> let people feel like they&#8217;re doing you a favor, or going beyond the call of duty by releasing open data. If your city has an executive order covering open data then they are following a directive issued by the Mayor. If your city has an open data statute then they are following the law. You don&#8217;t get special credit for following the law.</p>
<hr />
<p>Always be respectful of elected or appointed officials and understand that as important as you believe your job is, theirs is equally important. Not everyone will believe in what you&#8217;re trying to do as strongly as you do, but they will recognize if your actions are sincere. Find ways to frame open data and government innovation in ways that support the mission of their departments or agencies. Show them how their jobs can be made easier by embracing change. But&#8230;</p>
<p><strong>Don&#8217;t</strong> become close or chummy with elected or appointed officials. It makes it more difficult to have the hard conversations when they&#8217;re needed. Some confrontation and uncomfortable meetings, where you remind people of their obligations under an open data policy, are inevitable. You should not seek out a fight if it can be avoided, but you also shouldn&#8217;t shrink from one if it can&#8217;t.</p>
<hr />
<p>Take pride in the fact that you are a public servant. I believe strongly in the value of public service and that spending time in government working to make change happen is important. I rearranged my life and moved my family to a new state for the opportunity to serve a city that I have come to love. But&#8230;</p>
<p><strong>Don&#8217;t</strong> hang any pictures in your office. Don&#8217;t get comfortable. Recognize that your time in public service is temporary. The office I currently occupy looks much like it did 519 days ago when I walked into it. The contents of the cabinets and desk drawers are those thatÂ the previous occupant left behind. There are no decorations, few items with sentimental value, nothing to suggest permanence.</p>
<p>You should be a little nervous &#8211; at all times &#8211; that you may have pushed too hard and the city fathers and mothers will grow weary and decide that your services are no longer needed.</p>
<p>If you don&#8217;t feel that way, you&#8217;re probably not pushing hard enough.</p>
<p>[Note &#8211; photo courtesy of Flickr user <a href="http://www.flickr.com/photos/theenmoy/8917356869/in/photolist-ezZMwe-bPE2Fa-bsvAAN-bAKnrS-bFqtyc-bsvBJy-bsvBnG-bhJ3ZT-bVjJmf-bVjjeC-8Cfknx-auCWNv-7RZHrr-dbxbtV-7S3XQ3-aq5CQL-7S3XY9-84tjsw-bx3vL3-84tjxW-btJpf2-dmzpih-bYDCf1-d8unW5-88k21b-9XRxZ9-7Xdr8F-fU6Tez-7SyVSK-afLdcQ-85uWzR-f2EcRb-8w2ibR-7Wq7ho-hXBgqr-83pWVG-dABYat-dAHt6f-dAHtEm-dAHtfQ-dAHsnh-dAHsyN-dAHucf-dABZhK-dAHtoG-dAHtN3-dABZFV-dAHswb-dAHrFL-dABXQV-dAHsty/">Theen Moy</a>]</p>
]]></content:encoded>
					
					<wfw:commentRss>https://civic.io/2014/02/05/dont-hang-any-pictures/feed/</wfw:commentRss>
			<slash:comments>0</slash:comments>
		
		
		
		<media:content url="https://1.gravatar.com/avatar/19b2495d5cf389639a704807f4e62fcf?s=96&#38;d=identicon&#38;r=G" medium="image">
			<media:title type="html">mheadd</media:title>
		</media:content>

		<media:content url="https://civicio.files.wordpress.com/2014/02/hang-picture.jpg?w=273" medium="image">
			<media:title type="html">hang-picture</media:title>
		</media:content>
	</item>
		<item>
		<title>Turning Government Web Content Into APIs.</title>
		<link>https://civic.io/2014/01/16/turning-government-web-content-into-apis/</link>
					<comments>https://civic.io/2014/01/16/turning-government-web-content-into-apis/#respond</comments>
		
		<dc:creator><![CDATA[mheadd]]></dc:creator>
		<pubDate>Thu, 16 Jan 2014 20:14:50 +0000</pubDate>
				<category><![CDATA[civic hacking]]></category>
		<category><![CDATA[Development Tools]]></category>
		<category><![CDATA[Open Data]]></category>
		<category><![CDATA[Tutorials]]></category>
		<guid isPermaLink="false">http://civic.io/?p=3163</guid>

					<description><![CDATA[Inspired by a recent Open City project that repurposes data on sewage in the Chicago River, I wanted to work through a quick example of turing a web page that houses useful information on water quality in Philly into an API. Here is a quick... <div class="excerpt-more"><a class="read-more" href="https://civic.io/2014/01/16/turning-government-web-content-into-apis/">Read More <i class="fa fa-caret-right"></i></a></div>]]></description>
										<content:encoded><![CDATA[<p>Inspired by a recent <a href="http://opencityapps.org/">Open City</a> project that repurposes data on <a href="http://istheresewageinthechicagoriver.com/">sewage in the Chicago River</a>, I wanted to work through a quick example of turing a web page that houses useful information on water quality in Philly into an API.</p>
<p>Here is a quick screencast showing how easy it is to take information rendered as part of a standard HTML page and turn it into a useful JSON API.</p>
<div class="jetpack-video-wrapper"><iframe class="youtube-player" width="560" height="315" src="https://www.youtube.com/embed/WCa2DqJ3sh4?version=3&#038;rel=1&#038;showsearch=0&#038;showinfo=1&#038;iv_load_policy=1&#038;fs=1&#038;hl=en&#038;autohide=2&#038;wmode=transparent" allowfullscreen="true" style="border:0;" sandbox="allow-scripts allow-same-origin allow-popups allow-presentation"></iframe></div>
<p>It goes without saying that as more and more data producers in government learn about how data can be repurposed by others &#8211; both inside and outside of government &#8211; we&#8217;ll see more and more valuable information exposed as structured data and APIs. Viva #opendata!</p>
<p>Until then, there are some very powerful tools available for turing web content into powerful, reusable APIs. </p>
]]></content:encoded>
					
					<wfw:commentRss>https://civic.io/2014/01/16/turning-government-web-content-into-apis/feed/</wfw:commentRss>
			<slash:comments>0</slash:comments>
		
		
		
		<media:content url="https://1.gravatar.com/avatar/19b2495d5cf389639a704807f4e62fcf?s=96&#38;d=identicon&#38;r=G" medium="image">
			<media:title type="html">mheadd</media:title>
		</media:content>
	</item>
		<item>
		<title>Urban Storytelling with Open Data</title>
		<link>https://civic.io/2012/12/20/urban-storytelling-with-open-data/</link>
					<comments>https://civic.io/2012/12/20/urban-storytelling-with-open-data/#comments</comments>
		
		<dc:creator><![CDATA[mheadd]]></dc:creator>
		<pubDate>Thu, 20 Dec 2012 02:29:24 +0000</pubDate>
				<category><![CDATA[code samples]]></category>
		<category><![CDATA[Open Source]]></category>
		<category><![CDATA[opendata]]></category>
		<category><![CDATA[Tutorials]]></category>
		<guid isPermaLink="false">http://civic.io/?p=2771</guid>

					<description><![CDATA[One of the most important qualities of open data is that it can provide unparalleled insight into how a city works. Open data empowers urban storytelling &#8211; the process of identifying a trend, or some important characteristic of an urban area and then presenting that... <div class="excerpt-more"><a class="read-more" href="https://civic.io/2012/12/20/urban-storytelling-with-open-data/">Read More <i class="fa fa-caret-right"></i></a></div>]]></description>
										<content:encoded><![CDATA[<p>One of the most important qualities of open data is that it can provide unparalleled insight into how a city works.</p>
<p>Open data empowers urban storytelling &#8211; the process of identifying a trend, or some important characteristic of an urban area and then presenting that information in a compelling way for others.</p>
<p>When I speak about open data, one of the things I emphasize is that the tools for creating stories with data are becoming more powerful and widespread everyday. With the right data, it&#8217;s not hard to tell an important or compelling story about a city. To prove my point, I decided to &#8220;put my money where my mouth is&#8221; at a recent civic hacking meetup in the Northern Liberties section of Philadelphia.</p>
<p>The City of Philadelphia and the Philadelphia Police Department recently released a hugely important dataset &#8211; <a href="http://opendataphilly.org/opendata/resource/215/philadelphia-police-part-one-crime-incidents/">major crime incidents</a> occurring in the city. This data is available as both a static download (updated with the latest information each morning) or through set of APIs. I decided to use this data set, and a tool that&#8217;s been on my list to experiment with for a while &#8211; <a href="http://blog.cartodb.com/post/32464928928/torque-big-data-meets-time-based-maps-bundled-with">Torque</a>, from CartoDB &#8211; to tell an urban story.</p>
<p>The code I wrote to tell my story is on <a href="https://github.com/mheadd/philly-homicides">GitHub</a>, and you can see the data visualization I built <a href="http://mheadd.github.com/philly-homicides/">here</a>.</p>
<p>Below is a screencast of the steps I took to build this visualization &#8211; as I have said many times, the amount of effort required to build a compelling civic application (provided the right data is available) is trivial. See if you agree after watching this short video.</p>
<div class="jetpack-video-wrapper"><iframe class="youtube-player" width="560" height="315" src="https://www.youtube.com/embed/LpWN0kYZhro?version=3&#038;rel=1&#038;showsearch=0&#038;showinfo=1&#038;iv_load_policy=1&#038;fs=1&#038;hl=en&#038;autohide=2&#038;wmode=transparent" allowfullscreen="true" style="border:0;" sandbox="allow-scripts allow-same-origin allow-popups allow-presentation"></iframe></div>
<p>The technology is elegant. The visualization is cool. But the story itself is rather sad &#8211; there are way too many homicides in Philadelphia.</p>
<p>Our Mayor and other city leaders are working hard to change this. Just recently, Mayor Nutter <a href="http://www.philly.com/philly/blogs/cityhall/After-mass-shooting-in-Newtown-Nutter-calls-for-sensible-gun-laws.html">articulated the frustrations of mayors from across the country</a> who are calling for tighter restrictions on the guns that cause so many of the homicides in Philadelphia and elsewhere.</p>
<p>I think part of the change that Mayor Nutter and other mayors are calling for is showing people the magnitude of the problem. This is what a compelling visualization can do &#8211; it can reach someone the way that a written story or even a one-on-one conversation often can not.</p>
<p>The problem of violence that plagues urban areas isn&#8217;t just a challenge for our city leaders. It&#8217;s a challenge for all of us &#8211; we all need to be a part of making positive change happen. One way to reach people and motiviate them to be a part of the change is to build a compelling visualization &#8211; to tell a compelling urban story. With the right tools, almost anyone can do it.</p>
<p>This is the power of open data.</p>
]]></content:encoded>
					
					<wfw:commentRss>https://civic.io/2012/12/20/urban-storytelling-with-open-data/feed/</wfw:commentRss>
			<slash:comments>2</slash:comments>
		
		
		
		<media:content url="https://1.gravatar.com/avatar/19b2495d5cf389639a704807f4e62fcf?s=96&#38;d=identicon&#38;r=G" medium="image">
			<media:title type="html">mheadd</media:title>
		</media:content>
	</item>
		<item>
		<title>From &#8220;Zero to Civic&#8221; in 5 Minutes</title>
		<link>https://civic.io/2012/07/09/from-zero-to-civic-in-5-minutes/</link>
					<comments>https://civic.io/2012/07/09/from-zero-to-civic-in-5-minutes/#comments</comments>
		
		<dc:creator><![CDATA[mheadd]]></dc:creator>
		<pubDate>Mon, 09 Jul 2012 14:46:19 +0000</pubDate>
				<category><![CDATA[code samples]]></category>
		<category><![CDATA[Open Source]]></category>
		<category><![CDATA[opendata]]></category>
		<category><![CDATA[Tutorials]]></category>
		<guid isPermaLink="false">http://civic.io/?p=2582</guid>

					<description><![CDATA[One of the most powerful things about open government data is all of the options it enables. Open data is the single most important ingredient in civic apps, and it can also power visualizations, mashups and countless other civic uses. The very best open data... <div class="excerpt-more"><a class="read-more" href="https://civic.io/2012/07/09/from-zero-to-civic-in-5-minutes/">Read More <i class="fa fa-caret-right"></i></a></div>]]></description>
										<content:encoded><![CDATA[<p>One of the most powerful things about open government data is all of the options it enables.</p>
<p>Open data is the single most important ingredient in civic apps, and it can also power visualizations, mashups and countless other civic uses. The very best open data typically lends itself to several different kinds of uses.</p>
<p>When paired with the <a href="http://www.programmableweb.com/">increasingly sophisticated tools and APIs available to developers</a>, building powerful and useful civic applications with open government data has never been easier.</p>
<p>This post is meant to provide a quick overview to using open government data to build a civic application &#8211; to demonstrate that someone with moderate coding ability, even if they&#8217;ve never built a civic application before &#8211; can go from &#8220;zero to civic&#8221; in just minutes.</p>
<p>The screencast below demonstrates how to take an open data set for health inspections from the City of Louisville, KY and build a simple but easy to use text messaging application using open source and free tools.</p>
<div class="jetpack-video-wrapper"><iframe class="youtube-player" width="560" height="315" src="https://www.youtube.com/embed/MnV5hln6vSA?version=3&#038;rel=1&#038;showsearch=0&#038;showinfo=1&#038;iv_load_policy=1&#038;fs=1&#038;hl=en&#038;autohide=2&#038;wmode=transparent" allowfullscreen="true" style="border:0;" sandbox="allow-scripts allow-same-origin allow-popups allow-presentation"></iframe></div>
<p><span id="more-2582"></span></p>
<p>Imagine going out to eat with friends or family &#8211; you happen upon a new restaurant and you&#8217;re interested in finding out more. You can check Google or Yelp for reviews, but what if you wanted to know how a restaurant fared on a government health inspection? For that, unfortunately, there aren&#8217;t a lot of options.</p>
<p>In Louisville, KY, you can now check how a restaurant or food service establishment fared on their latest inspection using the simple SMS application demoed here.</p>
<p>When governments like <a href="http://data.louisvilleky.gov/">Louisville</a> release open data, they enable options for how people consume information. Having more options about how to get data that you find important is awesome.</p>
<p>Think about the weather &#8211; there are scores of different ways that you can consume information about what the weather will be like on a given day. Because the <a href="http://flowingdata.com/2010/08/18/how-weather-data-became-open-data/">data behind weather forecasts is open</a>, it is integrated into all sorts of different channels and platforms. This makes it easier to consume, because consumers can now choose the way in which they get the information they want.</p>
<p>The technology utilized in this demo is pretty straightforward and mainstream. PHP and MySQL are ubiquitous and widely supported.</p>
<p>Should a developer choose a different kind of database to store the Louisville health inspection data, that&#8217;s an equally valid choice. If they&#8217;d rather use a different technology for their application &#8211; that&#8217;s also fine.</p>
<p>Developers are free to use the technologies they find most appealing, and to design the interface they believe is most useful.</p>
<p>Open data is the key to all of these options.</p>
<p>It&#8217;s the foundation on which an increasingly <a href="http://www.citygoround.org/">vibrant ecosystem of applications</a> is built.</p>
]]></content:encoded>
					
					<wfw:commentRss>https://civic.io/2012/07/09/from-zero-to-civic-in-5-minutes/feed/</wfw:commentRss>
			<slash:comments>2</slash:comments>
		
		
		
		<media:content url="https://1.gravatar.com/avatar/19b2495d5cf389639a704807f4e62fcf?s=96&#38;d=identicon&#38;r=G" medium="image">
			<media:title type="html">mheadd</media:title>
		</media:content>
	</item>
		<item>
		<title>Building Multichannel Transit Apps with Tropo</title>
		<link>https://civic.io/2010/11/02/building-multichannel-transit-apps-with-tropo/</link>
					<comments>https://civic.io/2010/11/02/building-multichannel-transit-apps-with-tropo/#comments</comments>
		
		<dc:creator><![CDATA[mheadd]]></dc:creator>
		<pubDate>Tue, 02 Nov 2010 19:55:59 +0000</pubDate>
				<category><![CDATA[Development Tools]]></category>
		<category><![CDATA[Open Government]]></category>
		<category><![CDATA[Open Source]]></category>
		<category><![CDATA[Tropo]]></category>
		<category><![CDATA[Tutorials]]></category>
		<category><![CDATA[IM]]></category>
		<category><![CDATA[mysql]]></category>
		<category><![CDATA[opengov]]></category>
		<category><![CDATA[PHP]]></category>
		<category><![CDATA[SMS]]></category>
		<category><![CDATA[transit]]></category>
		<guid isPermaLink="false">http://www.voiceingov.org/blog/?p=2165</guid>

					<description><![CDATA[This post is the third in a series about building an open source transit data application using GTFS data from the Delaware Transit Corporation. In the first post, I described how to download the State of Delaware&#8217;s transit data and populate a MySQL database with... <div class="excerpt-more"><a class="read-more" href="https://civic.io/2010/11/02/building-multichannel-transit-apps-with-tropo/">Read More <i class="fa fa-caret-right"></i></a></div>]]></description>
										<content:encoded><![CDATA[<p>This post is the third in a series about building an open source transit data application using <acronym title="General Transit Feed Specification">GTFS</acronym> data from the <a href="http://www.dartfirststate.com/" target="_blank">Delaware Transit Corporation</a>.</p>
<p>In <a href="http://www.voiceingov.org/blog/?p=2073">the first post</a>, I described how to download the State of Delaware&#8217;s transit data and populate a MySQL database with it.  </p>
<p>In <a href="http://www.voiceingov.org/blog/?p=2117">the previous post</a>, I walked through a process of setting up stored procedures for querying the transit data and setting up a LAMP application environment.</p>
<p>Now we&#8217;re ready to write code for our transit app!</p>
<h3>Choosing a Platform</h3>
<p>One of the most under appreciated developments that has accompanied the increasing amount of government data that has become available in open formats is the vast array of new tools now available for developers to use.  I&#8217;ve <a href="http://www.voiceingov.org/blog/?p=1471">talked about this a lot</a> in the past but it bears repeating &#8211; it has never been easier to build sophisticated, multi-channel communication applications than it is now.<br />
<img src="https://i0.wp.com/www.voiceingov.org/blog/wp-content/tropo_logo.png" alt="Tropo" title="Tropo" style="margin:10px;padding:15px;float:right;" /><br />
The number of options open to developers is truly exciting, but there are some platforms that rise above the rest in terms of ease of use and in what they enable developers to do.  For this project, I will use the <a href="https://www.tropo.com/docs/webapi/newhowitworks.htm" target="_blank">Tropo WebAPI platform</a>.</p>
<p>The Tropo WebAPI has a number of advantage that will come in handy for our transit app project (and any other projects you&#8217;ve got in the works).  You can write a Tropo app in one of several popular scripting and web development languages &#8211; Ruby, Python, PHP, C# and JavaScript (Node.js).  There are <a href="https://www.tropo.com/docs/webapi/libraries.htm" target="_blank">libraries available for each language</a> that make it easy to build Tropo apps and to integrate with the Tropo API.  (Disclaimer &#8211; I&#8217;ve worked on several of these libraries.)</p>
<p>In addition, the real magic that Tropo brings to the table is the ability to serve users on multiple communication channels (phone, IM, SMS, Twitter) from a single code base.  This is especially important for an application meant to service transit riders.  These users may not have the luxury of sitting in front of a desktop computer in order to look up information on a bus route or schedule.  They are much more likely to be traveling and using some sort of phone or mobile device.  The Tropo WebAPI is perfect for our needs.</p>
<p>Vivek Kundra, the former CIO of the District of Columbia and current CIO of the United States, has described the effort by governments to release data in open formats as &#8220;the democratization of data&#8221; &#8211; these efforts make previously hard to get, or hard to use data available for everyone.</p>
<p>I like to describe platforms like <a href="https://www.tropo.com/home.jsp" target="_blank">Tropo</a> and the various libraries that are available to use with it as &#8220;the democratization of application development&#8221; &#8211; these tools make building powerful communication apps simple for anyone who understands web development.</p>
<h3>Building our Transit App</h3>
<p>Before we can build our application, we need to decide what it will do.</p>
<p>For our purposes, this has already been determined by the stored procedures we built <a href="http://www.voiceingov.org/blog/?p=2117">in the last post</a>.  Our <strong>transitdata</strong> database has 2 stored procedures &#8211; one to return the nearest bus stops to a specific address or location, and one to return the next bus departure times from a specific bus stop.</p>
<p>However, this series of posts is meant to inspire readers to build their own applications &#8211; now that you have transit data in a powerful relational database like MySQL you can query it any way you like.  In addition, the SQL scripts and steps developed for this series of posts can certainly be used with the data from any other transit agency that uses the GTFS format.  <a href="http://code.google.com/p/googletransitdatafeed/wiki/PublicFeeds">There are lots</a>.  Use your imagination &#8211; build whatever you find useful.</p>
<p>So now that we have some idea of what we want our application to do, we need to select a development language.  It will probably come as no surprise that for this example I&#8217;m going to use the <a href="http://php.net/" target="_blank">PHP scripting language</a> and the <a href="http://github.com/tropo/tropo-webapi-php" target="_blank">PHP Library for the Tropo WebAPI</a>.  PHP is a good match for Linux, Apache and MySQL &#8211; all technologies we used in the previous entries in this series of blog posts.</p>
<p>If you want some more detailed information on building PHP applications that run on the Tropo WebAPI platform, you can review a separate series of blog posts on this issue <a href="http://www.voiceingov.org/blog/?p=1918">here</a>.</p>
<p>To get the <a href="http://github.com/tropo/tropo-webapi-php" target="_blank">PHP Library for the Tropo WebAPI</a>, you can download it and unpack on your web server, or simply clone the Github repo.</p>
<p>Once you do that, you can grab the code for our demo application from <a href="http://gist.github.com/659768" target="_blank">GitHub as well</a>.</p>
<p>In order to test this application, you&#8217;ll need to sign up for a free Tropo account &#8211; you can <a href="https://www.tropo.com/" target="_blank">do that here</a>.  Once you are signed up, go to the Applications section in your Tropo account and set up a new WebAPI application that points to the location of our PHP script on your web server.  You can see more detailed information on setting up a Tropo account <a href="https://www.tropo.com/docs/webapi/newquickstart.htm" target="_blank">here</a>.</p>
<p><img src="https://i0.wp.com/www.voiceingov.org/blog/wp-content/web-api.png" alt="web-api" title="web-api" width="412" height="240" /></p>
<p>Note &#8211; You&#8217;ll also need an API key from Google Maps for geocoding addresses &#8211; <a href="http://code.google.com/apis/maps/signup.html" target="_blank">get one here</a>.  Change the following line in the application to include your Google API key:</p>
<blockquote>
<pre>
define("MAPS_API_KEY", "your-api-key-goes-here");
</pre>
</blockquote>
<p>Once your Tropo account and application are set up, you can add as many different contact methods as you like &#8211; your Tropo application is automatically provisioned a Skype number, a SIP number and an iNUM.  </p>
<p>To illustrate how our transit app will work, I&#8217;ve gone ahead and assigned a Jabber IM name to my app &#8211; <strong>findthebus@tropo.im</strong>.  Add this to your friends/user list in Google chat and you can use the app I&#8217;ve set up.  Here&#8217;s what it looks like in my IM client:</p>
<p><img src="https://i0.wp.com/www.voiceingov.org/blog/wp-content/transit-finder1.png" alt="transit-finder1" title="transit-finder1" /></p>
<p>As you can see, my first IM to <strong>findthebus@tropo.im</strong> sends the address of a building in Downtown Wilmington (actually, a building I used to work in).  The app responds with the three closest bus stops and the distance (in miles) to each.</p>
<p>I then send the number of the bus stop I am interested in.  The app responds with the next three buses to leave that stop, the route served by each and the number of minutes before each departs.</p>
<p>How cools is that!</p>
<p>I could very easily make this application more sophisticated, so that it it delivers content tailored to specific channels (i.e., IM vs. phone) but I want to keep things simple for now.</p>
<p>In the next blog post of this series, we will introduce some additional tools, including Google Maps and the new hotness in cloud telephony &#8211; <a href="http://phono.com/" target="_blank">Phono</a>.</p>
<p>Stay tuned!</p>
]]></content:encoded>
					
					<wfw:commentRss>https://civic.io/2010/11/02/building-multichannel-transit-apps-with-tropo/feed/</wfw:commentRss>
			<slash:comments>2</slash:comments>
		
		
		
		<media:content url="https://1.gravatar.com/avatar/19b2495d5cf389639a704807f4e62fcf?s=96&#38;d=identicon&#38;r=G" medium="image">
			<media:title type="html">mheadd</media:title>
		</media:content>

		<media:content url="http://www.voiceingov.org/blog/wp-content/tropo_logo.png" medium="image">
			<media:title type="html">Tropo</media:title>
		</media:content>

		<media:content url="http://www.voiceingov.org/blog/wp-content/web-api.png" medium="image">
			<media:title type="html">web-api</media:title>
		</media:content>

		<media:content url="http://www.voiceingov.org/blog/wp-content/transit-finder1.png" medium="image">
			<media:title type="html">transit-finder1</media:title>
		</media:content>
	</item>
		<item>
		<title>Democratizing Transit Data with Open Source Software</title>
		<link>https://civic.io/2010/10/20/democratizing-transit-data-with-open-source-software/</link>
					<comments>https://civic.io/2010/10/20/democratizing-transit-data-with-open-source-software/#respond</comments>
		
		<dc:creator><![CDATA[mheadd]]></dc:creator>
		<pubDate>Wed, 20 Oct 2010 19:53:23 +0000</pubDate>
				<category><![CDATA[Development Tools]]></category>
		<category><![CDATA[Open Government]]></category>
		<category><![CDATA[Open Source]]></category>
		<category><![CDATA[Tutorials]]></category>
		<category><![CDATA[mysql]]></category>
		<category><![CDATA[PHP]]></category>
		<category><![CDATA[SMS]]></category>
		<category><![CDATA[transit]]></category>
		<guid isPermaLink="false">http://www.voiceingov.org/blog/?p=2117</guid>

					<description><![CDATA[Democratizing government data will help change how government operatesâand give citizens the ability to participate in making government services more effective, accessible, and transparent. &#8212; Peter Orszag, OMB Director This post is a continuation in a series on building a transit data application using GTFS... <div class="excerpt-more"><a class="read-more" href="https://civic.io/2010/10/20/democratizing-transit-data-with-open-source-software/">Read More <i class="fa fa-caret-right"></i></a></div>]]></description>
										<content:encoded><![CDATA[<blockquote><p>
Democratizing government data will help change how government operatesâand give citizens the ability to participate in making government services more effective, accessible, and transparent.</p>
<p>&#8212; <a href="http://www.whitehouse.gov/blog/Democratizing-Data/" target="_blank">Peter Orszag</a>, OMB Director
</p></blockquote>
<p>This post is a continuation in a series on building a transit data application using <a href="http://code.google.com/transit/spec/transit_feed_specification.html">GTFS</a> data recently released by the State of Delaware.</p>
<p>If you missed my first post, <a href="http://www.voiceingov.org/blog/?p=2073">go back and check it out</a>.  You can get a <a href="http://www.mysql.com/">MySQL</a> database loaded up with all of the Delaware GTFS data in just a couple of minutes.  Once you do that, you&#8217;ll be ready to follow along.<br />
<img src="https://i0.wp.com/www.voiceingov.org/blog/wp-content/mysql.png" alt="MySQL Database" title="MySQL Database" style="float:right;padding:10px;margin:10px;" /><br />
Continuing our work from the last post, in this post we&#8217;ll finish building out our database and set up an environment to run a web application &#8211; for the purposes of the demo app I&#8217;m building for this series, I&#8217;ll assume you have a standard <acronym title="Linux, Apache, MySQL, PHP">LAMP</acronym> set up to work with.</p>
<h3>Finish the Database Setup</h3>
<p>In the last post, we downloaded the GTFS data from the State of Delaware, unzipped it and loaded it into a MySQL database.  Now, we need to set up some stored procedures so that we can extract data from our MySQL database and present it to an end user.</p>
<p>You can see the stored procedures I created for this demo application <a href="http://gist.github.com/632306">on GitHub</a>.  To load them into our shiny new database, simply run:</p>
<blockquote>
<pre>  ~$ wget http://gist.github.com/raw/632306/
	    9860651ba2a61cd5af1c18529cdbab5f8c6f8e97/dartfirststate_de_us_procs.sql </pre>
<pre>  ~$ mysql -u user_name -p transitdata &lt; dartfirststate_de_us_procs.sql</pre>
</blockquote>
<p>Thats it!</p>
<p>If you look at these procedures, you&#8217;ll see that they are set up to answer two different questions from users.  The first one &#8211; <code>getDepartureTimesAndRoutesByStopID</code> &#8211; will query our database and get a set of routes and departure times by the ID of a transit stop.  The other &#8211; <code>GetClosestStopsByLocation</code> &#8211;  accepts a lat/lon and returns the stop ID and name of the transit stops closest the the requesting location.</p>
<p>In practice, you can see these two procedures working in tandem &#8211; the later procedure would be used by someone wishing to find the transit stop closest to their present location.  The former would provide information on the next buses to reach that stop, the routes they serve and the scheduled departure time from that location.</p>
<p>There are certainly many more potential queries that could be used to extract valuable information from the GTFS data in our database, but these two should suffice for our demo application.  Also, both are pretty well suited for use from a text messaging (<acronym title="Short Message Service">SMS</acronym>) application, which is what we&#8217;ll build in the last post in this series.</p>
<h3>Setting up the Application Environment</h3>
<p>I assume for this series of posts that you have access to a LAMP server.  This server should be hosted somewhere where it can receive HTTP posts from a third party platform (this is required in order to build an SMS application).</p>
<p>While it is not a requirement that you code your transit application in PHP, I will do so in this series.  Feel free to use the development language of your choice in building your own application &#8211; just about every web development language can work with MySQL.</p>
<p>Before we start writing code, lets finish a few last items.  First, lets create a user for our web application &#8211; remember to give this user only the privileges they need.  For our demo application, the web app user only needs to <code>EXECUTE</code> stored procedures.  So, we want to do this at the MySQL shell:</p>
<blockquote>
<pre>mysql&gt; GRANT EXECUTE ON transitdata.* TO username@'localhost' IDENTIFIED BY 'password'; </pre>
<pre>mysql&gt; FLUSH PRIVILEGES;</pre>
</blockquote>
<p>Be sure to replace the &#8216;username&#8217; and &#8216;password&#8217; above with values of your choosing.  Now, let&#8217;s put our database access credentials in a safe and convenient place.</p>
<p>When writing a web application, I prefer not to store this inforamtion in my code (as a config item or declared constant).  Instead, I like to keep this information in my Apache configuration.</p>
<p>If you&#8217;re using Apache on Ubuntu, you can typically just store this inforamtion in your VirtualHost file (located in <code>/etc/apache2/sites-available/</code>).  Use the Apache <strong>SetEnv</strong> directive to set the values you want to store:</p>
<blockquote>
<pre>
SetEnv TRANSIT_DB_HOST localhost
SetEnv TRANSIT_DB_USER username
SetEnv TRANSIT_DB_PASS password
SetEnv TRANSIT_DB_NAME transitdata
SetEnv TRANSIT_DB_PORT 3306
</pre>
</blockquote>
<p>Again,  be sure to replace the âusernameâ and âpasswordâ above with the values used when creating your MySQL user.  Once you have entered these values into your VirtualHost file, save it and reload Apache:</p>
<blockquote>
<pre> ~$ sudo /etc/init.d/apache2 reload</pre>
</blockquote>
<p>Now we&#8217;re all set to start writing code! </p>
<p>In the next post we&#8217;ll build a simple, yet powerful PHP-based SMS application that anyone with a cell phone can use to find a transit location nearest to them in the State of Delaware, and find out the departure times / routes from that location.</p>
<p>Stay tuned!</p>
]]></content:encoded>
					
					<wfw:commentRss>https://civic.io/2010/10/20/democratizing-transit-data-with-open-source-software/feed/</wfw:commentRss>
			<slash:comments>0</slash:comments>
		
		
		
		<media:content url="https://1.gravatar.com/avatar/19b2495d5cf389639a704807f4e62fcf?s=96&#38;d=identicon&#38;r=G" medium="image">
			<media:title type="html">mheadd</media:title>
		</media:content>

		<media:content url="http://www.voiceingov.org/blog/wp-content/mysql.png" medium="image">
			<media:title type="html">MySQL Database</media:title>
		</media:content>
	</item>
		<item>
		<title>How to Build an Open Transit Data Application</title>
		<link>https://civic.io/2010/10/08/how-to-build-an-open-transit-data-application/</link>
					<comments>https://civic.io/2010/10/08/how-to-build-an-open-transit-data-application/#respond</comments>
		
		<dc:creator><![CDATA[mheadd]]></dc:creator>
		<pubDate>Fri, 08 Oct 2010 18:07:14 +0000</pubDate>
				<category><![CDATA[Development Tools]]></category>
		<category><![CDATA[Open Government]]></category>
		<category><![CDATA[Open Source]]></category>
		<category><![CDATA[Tutorials]]></category>
		<guid isPermaLink="false">http://www.voiceingov.org/blog/?p=2073</guid>

					<description><![CDATA[Earlier this year, I had the chance to work with one of my state&#8217;s Senators to draft and pass a bill requiring the state&#8217;s transit agency to publish all of it&#8217;s route, schedule and fare information in an open format for use by third parties.... <div class="excerpt-more"><a class="read-more" href="https://civic.io/2010/10/08/how-to-build-an-open-transit-data-application/">Read More <i class="fa fa-caret-right"></i></a></div>]]></description>
										<content:encoded><![CDATA[<p>Earlier this year, I had the chance to work with <a href="http://twitter.com/bethanyhalllong">one of my state&#8217;s Senators</a> to draft and pass a bill requiring the state&#8217;s transit agency to publish all of it&#8217;s route, schedule and fare information in an open format for use by third parties.  </p>
<p>This bill was <a href="http://legis.delaware.gov/LIS/LIS145.NSF/vwLegislation/SB+242?Opendocument">signed into law by the Governor</a> a few months ago, and the data is now available (in GTFS format) on the <a href="http://www.dartfirststate.com/information/routes/index.shtml" target="_blank">Delaware Transit Agency&#8217;s web site</a>.</p>
<p>My primary goal in working to get this law enacted was to raise awareness within my state about the potential for open government data to spur civic coding and the development of useful applications at little or no cost to the government.  Now that my state actually publishes some open data (Hells to the yeah!), I think the next step for me is to provide some guidance on how to get started using it to build civic applications.  </p>
<p>Hopefully, this will show others how easy it is and get them to try their hand at building a civic application.</p>
<p>(Note, transit data is an especially rich source for developing civic applications.  For some background and more detail on this, <a href="http://www.voiceingov.org/blog/?p=1947">see this post</a>.)</p>
<p>In the next several posts, I&#8217;ll document one process for developing an open source transit data application using GTFS data from the Delaware Transit Agency.  I&#8217;ll be sharing code and some examples that will help you get started if you feel like trying your hand at building a civic application.</p>
<p>Let&#8217;s get started!</p>
<h3>Getting the Data</h3>
<p>Now that the Delaware Transit Agency has published all of their route and schedule information, anyone that wants to use it can simply<a href="http://www.dartfirststate.com/information/routes/gtfs_data/dartfirststate_de_us.zip"> download it</a>.</p>
<p>This zip file contains a collection of text files that conform to the GTFS specification &#8211; for a detailed description of file contents, <a href="http://code.google.com/transit/spec/transit_feed_specification.html" target="_blank">go here</a>.  If you want to build a transit app with GTFS data, I recommend spending a little time becoming familiar with the layout of these files, and getting a sense of what the data represents. </p>
<h3>Setting up a Database</h3>
<p>In order to use this data as part of an application, we&#8217;re probably going to need to get it into a database so that we can manipulate it and run queries against it.  An easy way to do this is to import it into a MySQL database instance.</p>
<p><a href="http://www.mysql.com/downloads/" target="_blank">MySQL</a> is a powerful open source database that is used in scores of different web applications and its a solid choice for building a transit data application.  In addition, the MySQL <a href="http://dev.mysql.com/doc/refman/5.1/en/load-data.html" target="_blank">LOAD DATA INFILE</a> statement is a powerful and easy way to populate a database with information from a text file (or multiple files).</p>
<p>I&#8217;ve created a SQL script to load Delaware transit data into a MySQL database.  You can <a href="http://gist.github.com/615470">get this script from GitHub</a> &#8211; it&#8217;s pretty simple, and you should feel free to modify it as your own personal preferences or requirements dictate.  Just fork the Gist.</p>
<p>Combining this script with a couple of minutes on the command line will give you a MySQL database with all of the transit data loaded up and ready to use.  The steps below assume that you have MySQL installed and running.</p>
<p>To install MySQL:<br />
<code>  ~$ sudo apt-get install mysql-server</code></p>
<p>To see if MySQL is running:<br />
<code>  ~$ pgrep mysql</code></p>
<p>Create a temporary location for the GTFS files:<br />
<code>  ~$ mkdir /tmp/dartfirst_de_us</code></p>
<p>Download the GTFS files from the Delaware Transit Agency website:<br />
<code>  ~$ wget http://www.dartfirststate.com/information/routes/<br />
	gtfs_data/dartfirststate_de_us.zip</code></p>
<p>Unzip the individual text files to our temporary location:<br />
<code>  ~$ unzip dartfirststate_de_us.zip -d /tmp/dartfirst_de_us/</code></p>
<p>Get the SQL script for loading GTFS files into MySQL from GitHub:<br />
<code>  ~$ wget http://gist.github.com/raw/<br />
	615470/7f62e8354d680011f7eea5f9afcfd0ae93a6fedb/dartfirststate_de_us.sql</code></p>
<p>Invoke MySQL and pass in the SQL script (make sure you change &#8216;user_name&#8217; to a valid MySQL user name):<br />
<code>  ~$ mysql -u user_name -p &lt; dartfirststate_de_us.sql</code></p>
<p>That&#8217;s it!</p>
<p>Now, all of the data from the original text files has been loaded into a MySQL database called <strong>transitdata</strong>.  You can start to construct queries to retrieve information from these tables to support the functionality for your application.</p>
<p>In the next post, I&#8217;ll walk through a few basic queries that can extract useful information from these tables.  We&#8217;ll also lay the groundwork for a really cool mobile application that I will deploy for use by the public when this series of posts is complete.</p>
<p>Stay tuned!</p>
]]></content:encoded>
					
					<wfw:commentRss>https://civic.io/2010/10/08/how-to-build-an-open-transit-data-application/feed/</wfw:commentRss>
			<slash:comments>0</slash:comments>
		
		
		
		<media:content url="https://1.gravatar.com/avatar/19b2495d5cf389639a704807f4e62fcf?s=96&#38;d=identicon&#38;r=G" medium="image">
			<media:title type="html">mheadd</media:title>
		</media:content>
	</item>
		<item>
		<title>NoSQL Telephony with Tropo and CouchDB</title>
		<link>https://civic.io/2010/01/12/nosql-telephony-with-tropo-and-couchdb/</link>
					<comments>https://civic.io/2010/01/12/nosql-telephony-with-tropo-and-couchdb/#respond</comments>
		
		<dc:creator><![CDATA[mheadd]]></dc:creator>
		<pubDate>Tue, 12 Jan 2010 22:51:07 +0000</pubDate>
				<category><![CDATA[CouchDB]]></category>
		<category><![CDATA[Development Tools]]></category>
		<category><![CDATA[Open Government]]></category>
		<category><![CDATA[Tutorials]]></category>
		<category><![CDATA[Cloud Telephony]]></category>
		<category><![CDATA[Tropo]]></category>
		<category><![CDATA[Ubuntu]]></category>
		<guid isPermaLink="false">http://www.voiceingov.org/blog/?p=1525</guid>

					<description><![CDATA[In the last two posts, I&#8217;ve provided a basic overview of how to create cloud telephony applications using the Tropo platform and CouchDB. In the first post of this series, I walked through a quick install of CouchDB and provided information on getting a Tropo... <div class="excerpt-more"><a class="read-more" href="https://civic.io/2010/01/12/nosql-telephony-with-tropo-and-couchdb/">Read More <i class="fa fa-caret-right"></i></a></div>]]></description>
										<content:encoded><![CDATA[<p>In the last two posts, I&#8217;ve provided a basic overview of how to create cloud telephony applications using the <a href="http://tropo.com" target="_blank">Tropo platform</a> and <a href="http://couchdb.apache.org/" target="_blank">CouchDB</a>.  </p>
<p><img src="https://i0.wp.com/www.voiceingov.org/blog/wp-content/couchdb-logo.png" alt="Apache CouchDB Logo" /></p>
<p>In the <a href="http://www.voiceingov.org/blog/?p=1471">first post</a> of this series, I walked through a quick install of CouchDB and provided information on getting a Tropo account set up.  In the <a href="http://www.voiceingov.org/blog/?p=1510">second post</a>, we created a simple auto attendant Tropo script in PHP that populates a CouchDB database with a call record for each inbound call that is transferred.</p>
<p>I&#8217;ll conclude the series with information on how to retrieve information from a CouchDB instance for use in a cloud telephony application, and talk about design documents.  This post will also introduce the reader to the concepts of CouchDB <em>Views</em> and <em>Show Functions</em> &#8211; powerful tools that can be harnessed to create truly cutting edge cloud phone apps.</p>
<p>First, let&#8217;s create a CouchDB database to hold our call settings.</p>
<p><strong>Creating a Call Settings Database</strong></p>
<p>As mentioned in the previous CouchDB posts, you can create a new call settings database using <code>curl</code> from the command line, or using the Futon GUI.  </p>
<blockquote><p>
$ curl -X PUT <a href="http://your_new_couchdb_ip:5984/call_settings" rel="nofollow">http://your_new_couchdb_ip:5984/call_settings</a></p>
<p>You should see a response from CouchDB like this:</p>
<p><strong>{&#8220;ok&#8221;:true}</strong></p>
</blockquote>
<p>You can add a record to the call settings database the same way.  This time, however, we&#8217;ll append the URL for our CouchDB database with a document ID, in this case &#8216;1000&#8217; &#8211; this is the extension that a caller to our cloud telephony app will dial.  We&#8217;ll use the document ID and and the CouchDB REST API to get all of the settings we&#8217;ll need to conduct the transfer &#8211; these settings can be seen in the document structure below (feel free to add others to meet your needs or preferences).</p>
<blockquote><p>
$ curl -X PUT <a href="http://your_new_couchdb_ip:5984/call_settings/1000" rel="nofollow">http://your_new_couchdb_ip:5984/call_settings/1000</a> -d &#8216;{&#8220;first_name&#8221;:&#8221;Joe&#8221;,&#8221;last_name&#8221;:&#8221;Blow&#8221;,&#8221;phone&#8221;:&#8221;17777777777&#8243;,&#8221;title&#8221;:&#8221;Master of Disaster&#8221;,&#8221;ring_tone&#8221;:&#8221;audio/ring.wav&#8221;}&#8217;</p>
<p>You should see a response from CouchDB like this:</p>
<p><strong>{&#8220;ok&#8221;:true,&#8221;id&#8221;:&#8221;1000&#8243;,&#8221;rev&#8221;:&#8221;1-0cf5a7c3a70ac5760f1a5d8dcb8b48d2&#8243;}</strong></p>
</blockquote>
<p>Let&#8217;s add a few more documents to our call settings database (replacing the telephone numbers below with real ones that you want callers to transfer to) and then view all of the documents that we have created.</p>
<blockquote><p>
$ curl -X PUT <a href="http://your_new_couchdb_ip:5984/call_settings/2000" rel="nofollow">http://your_new_couchdb_ip:5984/call_settings/2000</a> -d &#8216;{&#8220;first_name&#8221;:&#8221;Harry&#8221;,&#8221;last_name&#8221;:&#8221;Smith&#8221;,&#8221;phone&#8221;:&#8221;18888888888&#8243;,&#8221;title&#8221;:&#8221;President of the World&#8221;,&#8221;ring_tone&#8221;:&#8221;audio/ring.wav&#8221;}&#8217;</p>
<p>$ curl -X PUT <a href="http://your_new_couchdb_ip:5984/call_settings/3000" rel="nofollow">http://your_new_couchdb_ip:5984/call_settings/3000</a> -d &#8216;{&#8220;first_name&#8221;:&#8221;Martin&#8221;,&#8221;last_name&#8221;:&#8221;Scorsese&#8221;,&#8221;phone&#8221;:&#8221;19999999999&#8243;,&#8221;title&#8221;:&#8221;The Departed&#8221;,&#8221;ring_tone&#8221;:&#8221;audio/ring.wav&#8221;}&#8217;</p>
<p>You can view all of the documents in a CouchDB database using the HTTP GET method:</p>
<p>$ curl -X GET <a href="http://your_new_couchdb_ip:5984/call_settings/_all_docs" rel="nofollow">http://your_new_couchdb_ip:5984/call_settings/_all_docs</a></p>
<p>You should see a response from CouchDB like this:</p>
<p><strong>{&#8220;total_rows&#8221;:3,&#8221;offset&#8221;:0,&#8221;rows&#8221;:[<br />
{&#8220;id&#8221;:&#8221;1000&#8243;,&#8221;key&#8221;:&#8221;1000&#8243;,&#8221;value&#8221;:{&#8220;rev&#8221;:&#8221;1-0cf5a7c3a70ac5760f1a5d8dcb8b48d2&#8243;}},<br />
{&#8220;id&#8221;:&#8221;2000&#8243;,&#8221;key&#8221;:&#8221;2000&#8243;,&#8221;value&#8221;:{&#8220;rev&#8221;:&#8221;1-ee2f09516df8b191a89791b01828d788&#8243;}},<br />
{&#8220;id&#8221;:&#8221;3000&#8243;,&#8221;key&#8221;:&#8221;3000&#8243;,&#8221;value&#8221;:{&#8220;rev&#8221;:&#8221;1-a1399e8218ae75e1efb73ba3f87862ff&#8221;}}<br />
]}</strong></p>
</blockquote>
<p>Now we need to modify our Tropo PHP script to retrieve the settings we want to use with each transferred call.  </p>
<p>Note, for now we&#8217;ll keep the logic simple &#8211; if a caller enters an extension that does not exist we&#8217;ll get a specific HTTP response back from CouchDB &#8211; something in the 400 class of responses.  If this happens, we&#8217;ll just end the call &#8211; in the real world you&#8217;d want to do something a little more friendly, but you can sort that out when you build your own cloud telephony application. <img src="https://s0.wp.com/wp-content/mu-plugins/wpcom-smileys/twemoji/2/72x72/1f609.png" alt="ð" class="wp-smiley" style="height: 1em; max-height: 1em;" /></p>
<p><strong>Modifying the Tropo Script</strong></p>
<p>So, our new Tropo script looks like this:</p>
<p>Note that the <code>getPhoneNumberByExtension()</code> method no longer returns a hard coded phone number &#8211; it is using the 4-digit extension entered by the caller to access our CouchDB database using the REST API.  The response from CouchDB is a document in JSON format, that we can easily parse using PHP&#8217;s handy <code>json_decode()</code> function.</p>
<p>I&#8217;ve also modified the value of the $callLog variable to correctly capture some of the variables exposed in the Tropo environment (i.e., the session ID of the call, and the caller ID &#8211; see <a href="http://www.tropo.com/forums/?xt=1262904227270&amp;&amp;bb-cid=99&amp;bb-statusBitToShow=0&amp;bb-tid=1048001#bb" target="_blank">this thread</a> for more information).</p>
<p>So now we have a working cloud telephony application built on Tropo that uses CouchDB to get its call settings, and also to write a call record for billing, reconciliation, etc. </p>
<p>As cool as this is, there is still a lot more we can do with CouchDB in our cloud telephony apps.  Note the constants declared at the top of the Tropo script &#8211; the last two are blank; one for a design document name, and one for a show function.  </p>
<blockquote><p>
define(&#8220;COUCH_DB_DESIGN_DOCUMENT_NAME&#8221;, &#8220;&#8221;);<br />
define(&#8220;COUCH_DB_SHOW_FUNCTION_NAME&#8221;, &#8220;&#8221;);
</p></blockquote>
<p>Let&#8217;s talk about those concepts now, and explore how they could be used in a cloud telephony application.</p>
<p><strong>Getting more out of CouchDB &#8211; Design Documents, Map/Reduce and Show Functions</strong></p>
<p>As the title of this post suggests, we&#8217;re building cloud-based phone applications without SQL.  CouchDB doesn&#8217;t use SQL &#8211; instead it uses a Map/Recuce framework to index documents in a database.</p>
<p>Map functions can be used to emit a key-value listing of documents in a CouchDB database.  Reduce functions are used to aggregate the key-value pairs emitted by a Map function.  Map/Reduce functions (or Views) live inside of a special document in a CouchDB database called a &#8220;<a href="http://books.couchdb.org/relax/design-documents/design-documents" target="_blank">design document</a>&#8220;, which has a document ID prefixed with &#8220;_design/&#8221;.</p>
<p>For example, suppose we have a special design document in our database called &#8220;_design/extensions&#8221; with a View called &#8220;getExtensions&#8221; &#8211; our View is made up of a Map function and (optionally) a Reduce function.  Let&#8217;s assume our View has only a Map function to return data on extensions with valid phone numbers to transfer a caller to.</p>
<blockquote><p>
function(doc) {<br />
&nbsp;&nbsp;if(doc.phone.length == 11 &amp;&amp; doc.phone.substr(0,1) == &#8216;1&#8217;) {<br />
&nbsp;&nbsp;&nbsp;&nbsp;emit(doc._id, doc.phone);<br />
&nbsp;&nbsp;}<br />
}
</p></blockquote>
<p>Our Map function (which is written in JavaScript, and stored in our design document) has one parameter &#8211; <code>doc</code>.  This function is called for each document in our database, and the <code>doc</code> parameter represents the document itself.  As can be seen, we simply examine each document in the database to see if it has a valid phone number (11 digits, starting with 1).</p>
<p>Views are accessed using a specific URI structure (do note, however, that the REST API for querying Views can change significantly between CouchDB versions), and the response is a set of key-value pairs formatted as JSON.</p>
<blockquote>
<p><a href="http://server_ip_address:5984/database_name/_design/design_document_id/_view/view_name" rel="nofollow">http://server_ip_address:5984/database_name/_design/design_document_id/_view/view_name</a></p>
<p>$ curl -X GET <a href="http://your_new_couchdb_ip:5984/call_settings/_design/extensions/_view/getExtensions" rel="nofollow">http://your_new_couchdb_ip:5984/call_settings/_design/extensions/_view/getExtensions</a></p>
<p>You should see a response from CouchDB like this:</p>
<p><strong>{&#8220;total_rows&#8221;:3,&#8221;offset&#8221;:0,&#8221;rows&#8221;:[<br />
{&#8220;id&#8221;:&#8221;1000&#8243;,&#8221;key&#8221;:&#8221;1000&#8243;,&#8221;value&#8221;:&#8221;17777777777&#8243;},<br />
{&#8220;id&#8221;:&#8221;2000&#8243;,&#8221;key&#8221;:&#8221;2000&#8243;,&#8221;value&#8221;:&#8221;18888888888&#8243;},<br />
{&#8220;id&#8221;:&#8221;3000&#8243;,&#8221;key&#8221;:&#8221;3000&#8243;,&#8221;value&#8221;:&#8221;19999999999&#8243;}<br />
]}</strong></p>
</blockquote>
<p>You can check to see if your Map function is working properly by adding a document with an invalid phone number.</p>
<blockquote><p>
$ curl -X PUT <a href="http://your_new_couchdb_ip:5984/call_settings/4000" rel="nofollow">http://your_new_couchdb_ip:5984/call_settings/4000</a> -d &#8216;{&#8220;first_name&#8221;:&#8221;Richard&#8221;,&#8221;last_name&#8221;:&#8221;Kimble&#8221;,&#8221;phone&#8221;:&#8221;4444444&#8243;,&#8221;title&#8221;:&#8221;The Fugitive&#8221;,&#8221;ring_tone&#8221;:&#8221;audio/ring.wav&#8221;}&#8217;
</p></blockquote>
<p>Accessing the <code>getExtensions</code> view will return the same results as before, as the phone number for the new document does not pass validation.  Using design documents and Views, cloud telephony developers can use CouchDB to build grammars for user input which will significantly enhance the usability of the sample application we&#8217;ve used during the last few posts.</p>
<p>But there is even more potential with another piece of functionality in CouchDB &#8211; <a href="http://books.couchdb.org/relax/design-documents/shows" target="_blank">show functions</a>.  Show function also live in design documents, alongside Views.  Show functions allow a developer to return specifically formatted content from a CouchDB instance, not just data in JSON format.</p>
<p>A basic show function that can be used to return information from our CouchDB database in the format of a <a href="http://www.w3.org/TR/speech-grammar/" target="_blank">SRGS grammar</a> might look like this.</p>
<blockquote><p>
function(doc, req) {<br />
&nbsp;var grammer = &#8216;&lt;?xml version=&#8221;1.0&#8243;?&gt;&lt;grammar xmlns=&#8221;<a href="http://www.w3.org/2001/06/grammar&#8221;&gt;&#038;#8217" rel="nofollow">http://www.w3.org/2001/06/grammar&#8221;&gt;&#038;#8217</a>;;<br />
&nbsp;grammar += &#8216;&lt;rule id=&#8221;R_1&#8243;&gt;&lt;one-of&gt;&#8217;;<br />
&nbsp;grammar += &#8216;&lt;item&gt;&#8217; + doc.phone + &#8216;&lt;item&gt;&#8217;;<br />
&nbsp;grammar += &#8216;&lt;/one-of&gt;&lt;/rule&gt;&lt;/grammar&gt;&#8217;;<br />
&nbsp;return grammar;<br />
}
</p></blockquote>
<p>Like Views, Show Functions are accessed using a specific URI structure.</p>
<blockquote><p><a href="http://" rel="nofollow">http://</a>{server_ip_address}:5984/{database_name}/_design/{design_document_id}/_show/{show_function_name}/{document_id} </p></blockquote>
<p>Note that the Show function above is different from the Map function discussed earlier in that it takes two parameters &#8211; <code>doc</code> and <code>req</code>.  As before, the <code>doc</code> parameter represents the document the function is called against.  The req parameter represents a parameter that is sent in with the HTTP request, which can be used inside the function to render output.  So a Show function canbe accessed using the above URL with an optional parameter as well, like so.</p>
<blockquote><p>
<a href="http://" rel="nofollow">http://</a>{server_ip_address}:5984/{database_name}/_design/{design_document_id}/_show/{show_function_name}/{document_id}<strong>?{parameter}={some_value}</strong>
</p></blockquote>
<p><strong>Conclusion</strong> </p>
<p>I hope this series of posts has provided a helpful overview of CouchDB, with an emphasis on how it can be used to build cloud telephony applications.</p>
<p>Cloud telephony platforms like <a href="http://tropo.com" target="_blank">Tropo</a>, <a href="http://cloudvox.com/" target="_blank">CloudVox</a>, <a href="http://www.callfire.com" target="_blank">CallFire</a> and others provide enormous flexibility to developers in building and deploying sophisticated cloud telephony applications.  </p>
<p>Pair these tools with <a href="http://couchdb.apache.org/" target="_blank">CouchDB</a> and you&#8217;ve got a powerful combination for building full featured, easy to maintain cloud-based phone apps.</p>
]]></content:encoded>
					
					<wfw:commentRss>https://civic.io/2010/01/12/nosql-telephony-with-tropo-and-couchdb/feed/</wfw:commentRss>
			<slash:comments>0</slash:comments>
		
		
		
		<media:content url="https://1.gravatar.com/avatar/19b2495d5cf389639a704807f4e62fcf?s=96&#38;d=identicon&#38;r=G" medium="image">
			<media:title type="html">mheadd</media:title>
		</media:content>

		<media:content url="http://www.voiceingov.org/blog/wp-content/couchdb-logo.png" medium="image">
			<media:title type="html">Apache CouchDB Logo</media:title>
		</media:content>
	</item>
	</channel>
</rss>
